# 02_이상한 나라의 객체

### 객체, 그리고 이상한 나라

#### 앨리스 객체

- 앨리스의 상태를 결정하는 것은 행동이지만 행동의 결과를 결정하는 것은 상태다.
- 앨리스(객체)는 상태를 가지며 상태는 변경이 가능하다.
- 앨리스(객체)의 상태를 변경시키는 것은 앨리스(객체)의 행동이다.
  - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
  - 행동의 순서는 결과에 영향을 미친다.
- 앨리스(객체)는 어떤 상태에 있더라도 유일하게 식별 가능하다.

------

### 객체, 그리고 소프트웨어 나라

- 인간의 능력 안에서 개수를 셀 수 있고, 다른 사물과 구분할 수 있으며, 생성 시점을 알 수 있고, 독립적인 하나의 단위로 인식할 수 있는 모든 사물은 객체다.
- 객체란 식별 가능한 개체 또는 사물이다.
- 객체는 구별 가능한 식별자, 특징적인 행동, 변경 가능한 상태를 가진다.
- 소프트웨어 안에서 객체는 저장된 상태와 실행 가능한 코드를 통해 구현된다.

#### 상태

##### 왜 상태가 필요한가

- 어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다.
  - 예시 1) 자판기에서 가격이 1000원인 음료수를 선택하기 위해서는 자판기에 1000원을 넣어야한다.
  - 예시 2) 텔리비전의 채널을 변경하기 위해서는 먼저 텔레비전의 전원이 켜져 있어야 한다.
- 상태를 이용하면 과거의 모든 행동 이력을 설명하지 않고도 행동의 결과를 쉽게 예측하고 설명할 수 있다.

##### 상태와 프로퍼티

- 모든 객체의 상태는 단순한 값과 객체의 조합으로 표현할 수 있다.
- 객체의 상태를 구성하는 모든 특징을 통들어 객체의 프로퍼티(property)라고 한다.
  - 프로퍼티는 변경되지 않고 고정되기 때문에 '정적'이다.
  - 반면 프로퍼티 값(property value)은 시간이 흐름에 따라 변경되기 때문에 '동적'이다.
- 객체와 객체 사이의 의미 있는 연결을 링크(link)라고 한다.
  - 이 링크가 존재해야만 요청을 보내고 받을 수 있다.
  - 링크는 객체가 다른 객체를 참조할 수 있다는 것을 의미한다.
- 객체를 구성하는 단순한 값은 속성(attributer)라고 한다.

#### 행동

##### 상태와 행동

- 객체의 행동은 상태에 영향을 받는다.
- 객체의 행동은 상태를 변경시킨다.

##### 협력과 행동

- 객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다.
- 객체의 행동은 객체 자신의 상태 변경과 다른 객체에 대한 메시지 전송의 관점에서 부수효과를 명확히 파악해야 한다.

##### 상태 캡슐화

- 객체는 상태를 캡슐 안에 감춰둔 채 외부로 노출하지 않는다.
- 객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동뿐이다.
- 상태를 잘 정의된 행동 집합 뒤로 캡슐화하는 것은 객체의 자율성을 높이고 협력을 단순하고 유연하게 만든다. 

#### 식별자

- 식별자 : 객체를 서로 구별할 수 있게 만드는 특정한 프로퍼티
- 값 : 숫자, 문자열, 날짜, 시간, 금액 등과 같이 변하지 않는 양으로 불변 상태(immutable state)를 가진다.
- 값과 객체의 가장 큰 차이점은 값은 식별자를 가지지 않지만 객체는 식별자를 가진다는 점이다.
- 동등성(equality) : 상태를 이용해 두 값이 같은지를 판단할 수 있는 성질
- 동일성(identical) : 식별자를 기반으로 객체가 같은지를 판단할 수 있는 성질

------

### 행동이 상태를 결정한다

- 애플리케이션을 설계할때 상태를 먼저 결정하고 행동을 나중에 결정하는 방법은 설계에 좋지 않은 영향을 끼친다.
  - Why?
    - 첫째, 상태를 먼저 결정할 경우 캡슐화가 저해된다.
    - 둘째, 객체를 협력자가 아닌 고립된 섬으로 만든다.
    - 셋째, 객체의 재사용성이 저하된다.
- 따라서 상태가 아닌 **행동에 초점을 맞추는 것이 핵심**이다. **객체는 다른 객체와 협력하기 위해 존재**하기 때문이다.

------

### 은유와 객체

#### 두 번째 도시전설

- 객체지향 세계는 현실 세계의 단순한 모방이 아니다.
- 소프트웨어 상품은 실제 세계의 상품이 하지 못하는 가격 계산과 같은 행동을 스스로 수행할 수 있다.
  - 따라서 소프트웨어 상품이 실제 세계의 상품을 단순화하거나 추상화한 것이 아니라 전혀 다른 특성을 가지는 것을 의미한다.

#### 은유

- 현실 세계와 객체지향 세계 사이의 관계를 좀 더 정확하게 설명할 수 있는 단어는 은유(metaphor)다.
- 은유란 실제로는 적용되지 않는 한 가지 개념을 이용해 다른 개념을 서술하는 대화의 한 형태다.
- 현실 속의 객체의 의미 일부가 소프트웨어 객체로 전달되기 때문에 프로그램 내의 객체는 현실 속의 객체에 대한 은유라고 볼 수 있다.