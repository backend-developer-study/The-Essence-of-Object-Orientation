# 04_역할, 책임, 협력

객체지향 설계의 전체적인 품질을 결정하는 것은 개별 객체의 품질이 아니라 여러 객체들이 모여 이뤄내는 협력의 품질이다.

### 협력

- 협력은 다수의 요청과 응답으로 구성된다
- 전체적으로 협력은 다수의 연쇄적인 요청과 응답의 흐름으로 구성된다.

------

### 책임

- 객체가 책임을 가진다? -> 객체가 요청에 대해 대답해 줄 수 있거나, 적절한 행동을 할 의무가 있는 경우
- 객체에 어떤 요청을 하는 경우 그 대상이 요청을 처리할 책임이 있음을 암시한다.
- 객체의 책임 = 객체가 무엇을 알고 있는가(knowing) + 객체가 무엇을 할 수 있는가(doing)
- 객체지향 설계의 예술은 적절한 객체에게 적절한 책임을 할당하는 데 있다.

------

### 역할

#### 책임의 집합이 의미하는 것

- 어떤 객체가 수행하는 책임의 집합은 객체가 협력 안에서 수행하는 역할을 암시한다.

#### 역할이 답이다

- 역할은 협력 내에서 다른 객체로 대체할 수 있음을 나태나는 일종의 표식이다.
  - 판사 역할 : 하트 왕, 하트 여왕
  - 증인 역할 : 모자 장수, 요리사, 엘리스
- 역할을 대체하기 위해서는 각 역할이 수신할 수 있는 메시지를 동일한 방식으로 이해해야 한다.

#### 협력의 추상화

- 설계자가 다뤄야 하는 협력의 개수를 줄이는 동시에 구체적인 객체를 추상적인 역할로 대체함으로써 협력의 양상을 단순화한다.

#### 대체 가능성

- 객체가 다른 객체의 역할을 대신하기 위해서는 그 객체가 수행하는 모든 책임을 동일하게 수행할 수 있어야 한다.
- 역할의 대체 가능성 -> 행위 호완성 -> 동일한 책임의 수행

------

### 객체의 모양을 결정하는 협력

#### 흔한 오류

- 객체의 존재 이유는? 
  - 행위를 수행하며 협력에 참여하기 위해서

- 객체지향의 핵심은? 
  - 클래스를 어떻게 구현할 것인가 (X)
  - **객체가** 협력 안에서 **어떤 책임과 역할을 수행할 것인지를 결정**하는 것 (O)

#### 협력에 따라 흐르는 객체의 책임

- 올바른 객체를 설계하기 위해서는? 
  1. 견고하고 깔끔한 협력을 먼저 설계하기
  
  2. 객체들이 주고받을 요청과 응답의 흐름을 결정하기

------

### 객체지향 설계 기법

- 유연한 객체지향 설계를 위한 필수 요소
  1. 역할
  2. 책임
  3. 협력

#### 책임-주도 설계(Responsibility-Driven Design)

- 협력에 필요한 책임들을 식별하고 적합한 객체에게 책임을 할당하는 방식

#### 디자인 패턴

- 전문가들이 반복적으로 사용하는 해결 방법을 정의해 놓은 설계 템플릿의 모음

#### 테스트-주도 개발(Test-Driven Development)

- 테스트를 먼저 작성하고 테스트를 통과하는 구체적인 코드를 추가하면서 애플리케이션을 완성해가는 방식
- 다양한 설계 경험과 패턴에 대한 지식이 없는 사람들의 경우에는 온전한 효과를 보기 힘들 수 있다.