# 6.객체 지도

> 유일하게 변하지 않는 것은 모든 것이 변한다는 사실뿐이다. - 헤라클레이토스

- 다른 사람에게 길을 물어보기
  - 기능적이고 해결책 지향적인 접근법(functional, solution-directed approach)
  - 일반적 X, 재사용 X
  - 설명 어려움
  - 쉽지 않음
- 지도
  - 실세계를 기반으로 만들어진 추상화 모델
  - 구조적이고 문제 지향적인 접근법(structural, problem-directed approach)
  - 일반적 O, 재사용 O
  - 설명 쉬움
  - 범용적
  - 기능이 아니라 길을 찾을 수 있는 '구조'를 제공
  - 변하지 않는 안정적인 지형 정보 기반
  - 구조에 기능을 종속시키는 방법
  - 객체지향 개발 방법과 비슷
- 자주 변경되는 기능에 집중하기 보다 안정적인 구조를 기반으로 역할, 책임, 협력을 설계해라.

## 1.기능 설계 대 구조 설계

- 소프트웨어 설계는 '기능 측면의 설계'와 '구조 측면의 설계'가 있다.
- 기능 측면의 설계
  - 제품이 사용자를 위해 무엇을 할 수 있는지 초점
  - 개발 초기
- 구조 측면의 설계
  - 제품 형태가 어떠해야 하는지 초점
- 훌륭한 기능을 제공하는 동시에 요구사항 변경에 유연하게 대처할 수 있는 안정적인 구조를 제공하도록 노력해야한다.
- 현실은 불행하게도 요구사항이 항상 변한다. 설계가 어려운 이유는 요구사항이 계속 바뀌는데에 있다.
- 따라서 가장 좋은 방법은 기능 중점 설계가 아닌 안정적인 구조 기반의 설계다.
- 객체지향
  - 객체의 구조에 집중하고 기능이 객체의 구조를 따르게 만든다.
  - 객체 지도는 빠르게 변화하는 기능을 수용할 수 있는 자리를 제공한다.

## 2.두 가지 재료: 기능과 구조
- 기능: 사용자가 자신의 목표를 달성하기 위해 사용할 수있는 시스템 서비스
- 구조: 기능을 구현하기 위한 기반으로 기능 변경을 수용할 수 있을 정도로 안정적이어야한다.
- 기능을 수집하고 표현하기 위한 기법: 유스케이스 모델링
- 구조를 수집하고 표현하기 위한 기법: 도메인 모델링
- 유스케이스 모델링의 결과물: 유스케이스 모델
- 도메인 모델링의 결과물: 도메인 모델


## 3.안정적인 재료: 구조

### 3.1 도메인 모델

- 사용자가 프로그램을 사용하는 대상 분야를 '도메인'이라고 한다.
- ex) 의료, 금융, 게임 등
- 모델이란 대상을 단순화해서 표현한 것을 말한다. 
  - 대상을 즉 추상화하고 단순화 한 것.
  - 복잡성을 낮추기 위해
- 도메인 모델: 도메인 안의 개념과 개념 간의 관계, 다양한 규칙이나 제약 등을 주의 깊게 추상화한 것.
  - =이해 관계자들이 바라보는 멘탈 모델: 상호작용하는 사물들에 대해 갖는 모형 
  - 사용자 모델, 디자인 모델, 시스템 이미지를 포괄하도록 추상화한 소프트웨어 모델
  - 소프트웨어에 대한 멘탈 모델
- ex) 게임 플레이어는 게임 도메인을 캐릭터, 몬스터, 아이템 간의 관계로 파악함
- ex) 은행 도메인 - 고객, 계좌 사이의 돈
- 사용자와 설계자가 갖는 모델이 같을 수 없지만 설계자는 디자인 모델을 기반으로 만든 시스템 이미지가 사용자의 모델을 반영하려고 노력해야 한다.
  - 사용자들은 자신의 멘탈 모델과 유사한 방식으로 제품이 반응하고 움직일 것이라고 기대한다.
  - 훌륭한 디자인이란 사용자가 예상하는 방식에 따라 정확하게 반응하는 제품이다.
- 멘탈 모델의 3가지 측면
  - 사용자 모델: 사용자가 제품에 대해 가지고 있는 개념들
  - 디자인 모델: 설계자가 마음 속에 갖고 있는 시스템에 대한 개념화
  - 시스템 이미지: 최종 제품
  

### 3.2 도메인의 모습을 담을 수 있는 객체지향

- 최종 코드는 사용자가 도메인을 바라보는 관점(=사용자 모델)을 반영해야 한다.
- 도메인 모델은 사용자 모델을 포함하기 때문에 따라서 도메인 모델을 기반으로 애플리케이션을 설계해야 한다.
- 이러한 객체지향의 특성을 '연결완전성', '표현적 차이'라 한다.

### 3.3 표현적 차이

- 소프트웨어 객체가 현실 객체 사이의 의미적 거리를 표현적 차이 또는 의미적 차이라고 한다.
- 소프트웨어 객체는 그 대상이 현실적인지, 현실적이지 않은지에 상관없이 도메인 모델을 통해 표현되는 도메인 객체들을 은유해야 한다.
  - 도메인 모델이 있어야 코드 속에서 길을 잃지 않는다.
- 코드의 구조가 도메인의 구조를 반영하기 때문에 도메인을 이해하면 코드를 이해하기가 훨씬 쉬어진다.

### 3.4 불안정한 기능을 담는 안정적인 도메인 모델
- 도메인 모델을 기반으로 코드를 작성하는 두 번째 이유: 안정성
  - 이러한 안정성있는 도메인 모델로 소프트웨어를 설계하면 유연성도 따라온다.
- 도메인 모델의 핵심은 사용자가 도메인을 바라보는 관점을 반영하여 소프트웨어를 설계하고 구현한다는 것
  - 도메인에 사용자의 관점을 반영하는 이유는 사용자들이 누구보다도 도메인의 '본질적인' 측면을 가장 잘 이해하고 있기 때문이다.
  - 본질적이란 변경이 적고 비교적 그 특성이 오랜 시간 유지된다는 것을 의미한다.

## 4.불정안정 재료: 기능
- 도메인 모델이 중요하지만 사용자에게 중요한 것은 도메인 모델이 아니라 소프트웨어의 기능이다.
- 따라서 사용자에게 제공할 기능을 기술한 정보가 필요하다
- 소프트웨어의 기능을 기술하기 위해 '유스케이스'라는 유용한 기법을 사용할 수 있다.
- 기능적 요구사항: 시스템이 사용자에게 제공해야 하는 기능의 목록을 정리한 것
- 훌륭한 기능적 요구사항을 얻기 위해서는 목표를 가진 사용자와 시스템 간의 상호작용 관점으로 시스템을 봐야한다.
- 유스케이스: 사용자의 목표를 달성하기 위해 사용자와 시스템 간에 이뤄지는 상호작용의 흐름을 텍스트로 정리한 것.


### 4.1 유스케이스
- 기능적 요구사항: 시스템이 사용자에게 제공해야 하는 기능의 목록을 정리한 것
- 사용자들이 가지는 목표를 달성하기 위해 시스템과 하는 상호작용의 흐름을 텍스트로 정리한 것을 '유스케이스'라 한다.

### 4.2 유스케이스의 특성

1. 사용자와 시스템 간의 상호작용을 보여주는 '텍스트'
2. 하나의 시나리오가 아니라 여러 시나리오의 집합
3. 단순 기능 목록 나열하고는 다르다. 문맥까지 포함되어있다.
4. 유스케이스는 인터페이스와 관련된 세부 정보를 포함하지 말아야 한다.
5. 유스케이스는 내부 설계와 관련된 정보를 포함하지 않는다.

### 4.3 유스케이스는 설계 기법도, 객체지향 기법도 아니다

- 유스케이스는 단지 사용자가 바라보는 시스템의 외부 관점만을 표현한다.
- 유스케이스와 객체의 구조 사이에는 커다란 차이가 있다. 따라서 유스케이스를 보고 객체를 만드는 작업은 창조적이고 예술적인 자겅ㅂ이다.


## 5.재료 합치기: 기능과 구조의 통합


### 5.1 도메인 모델, 유스케이스 그리고 책임-주도 설계


### 5.2 기능 변경을 흡수하는 안정적인 구조


